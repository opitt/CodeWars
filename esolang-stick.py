def interpreter(tape):

    cmds = list(tape)
    stack = [0]
    out = ""
    pos_cur = 0
    pos_jumpback = 0
    POS_LAST_CMD = len(cmds) - 1

    while pos_cur <= POS_LAST_CMD:
        c = cmds[pos_cur]
        pos_cur += 1
        if c == "+":
            stack[-1] += 1
            if stack[-1] == 256:
                stack[-1] = 0
        elif c == "-":
            stack[-1] -= 1
            if stack[-1] == -1:
                stack[-1] = 255
        elif c == "^":
            stack.pop(-1)
        elif c == "*":
            out += chr(stack[-1])
        elif c == "!":
            stack.append(0)
        elif c == "[":
            pos_jumpback = pos_cur
            if stack[-1] == 0:
                try:
                    pos_cur = cmds.index("]", pos_cur) + 1
                except ValueError:
                    # should not happen by requirements
                    raise ValueError
        elif c == "]":
            if stack[-1] != 0:
                pos_cur = pos_jumpback
        else:
            pass
    return out


hello = """
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++*!++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++*!+++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++*!+++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++*!+++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++*!++++++++++++++++++++++++++++++++++++++++++++*!++
++++++++++++++++++++++++++++++*!++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++*!+++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++*!++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++*!++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++*!++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++*!+++++++++++++++++++++++++++++++++*!
"""
for code in ["+*","-*","+[+]*"]+[hello]:
    print(code, interpreter(code))
